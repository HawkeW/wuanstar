(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-unilist-test-unilist-test"],{"0043":function(t,n,e){"use strict";var i=e("288e");Object.defineProperty(n,"__esModule",{value:!0}),n.baseUrl=n.default=void 0,e("ac6a");var a=i(e("68ea")),o=i(e("1da2")),r=10,s=100,l="https://project.supersuperz.top";n.baseUrl=l;var c={components:{newsItem:a.default,uniLoadMore:o.default},onLoad:function(){var t=this;this.screenHeight(),this.isLoading=!0,this.getCategory(),setTimeout(function(){t.tabBars.forEach(function(n){t.newsList.push({data:[],total:0,pages:0,currentPage:0,refreshing:!1,refreshFlag:!1,refreshText:"",loadingText:"加载更多"})}),t.loadMore(0)},1e3)},data:function(){return{newsList:[],tabIndex:0,tabBars:[],cacheTab:[],scrollInto:"",isLoading:!1,vHeight:0}},methods:{scrolltolower:function(){console.log("scroll to lower")},screenHeight:function(){var t=this;uni.getSystemInfo({success:function(n){t.vHeight=n.screenHeight-84}})},getCategory:function(){var t=this;uni.request({url:l+"/news/category",method:"GET",data:{pageNum:1,pageSize:20},success:function(n){if("200"==n.data.status){t.tabBars=n.data.data.records;var e=[{id:0,name:"首页",description:""}];t.tabBars=e.concat(t.tabBars)}else uni.showModal({showCancel:!1,content:n.data.message})}})},ontabtap:function(t){var n=t.target.dataset.current||t.currentTarget.dataset.current;this.switchTab(n)},ontabchange:function(t){var n=t.target.current||t.detail.current;this.switchTab(n)},getList:function(t){var n=this,e=this.newsList[t];console.log(this.tabBars[t]),uni.request({url:l+"/news",method:"GET",data:{category:0==t?"":this.tabBars[t].name,pageNum:e.currentPage,pageSize:20},success:function(t){if("200"==t.data.status){var i=[];i=t.data.data.records,e.total=t.data.data.total,e.pages=t.data.data.pages,e.data=e.data.concat(i),n.isLoading=!1}else uni.showModal({showCancel:!1,content:t.data.message})}})},loadMore:function(t){var n=this;if(void 0!==this.newsList[t].currentPage){if(this.newsList[t].currentPage>=1&&this.newsList[t].total<=this.newsList[t].data.length)return console.log("当前页没有更多了"),void console.log(this.newsList[t]);this.isLoading=!0,setTimeout(function(){console.log("加载数据"+n.newsList[t]),n.newsList[t].currentPage++,n.getList(t)},500)}else console.log("currentpage不存在")},switchTab:function(t){if(this.isLoading=!0,this.tabIndex!==t){if(this.tabIndex=t,0===this.newsList[t].data.length&&this.loadMore(t),this.newsList[t].data.length>s){var n=this.cacheTab.indexOf(t);n<0&&this.cacheTab.push(t)}if(this.scrollInto=this.tabBars[t].id,this.cacheTab.length>r){var e=this.cacheTab[0];this.clearTabData(e),this.cacheTab.splice(0,1)}}},clearTabData:function(t){this.newsList[t].data.length=0,this.newsList[t].loadingText="加载更多..."},refreshData:function(){},onrefresh:function(t){var n=this,e=this.newsList[t];e.refreshFlag&&(e.refreshing=!0,e.refreshText="正在刷新...",setTimeout(function(){n.refreshData(),n.pulling=!0,e.refreshing=!1,e.refreshFlag=!1,e.refreshText="已刷新",setTimeout(function(){n.pulling=!1},500)},2e3))},onpullingdown:function(t){console.log(t);var n=this.newsList[this.tabIndex];n.refreshing||this.pulling||(Math.abs(t.pullingDistance)>Math.abs(t.viewHeight/4)?(n.refreshFlag=!0,n.refreshText="释放立即刷新"):(n.refreshFlag=!1,n.refreshText="下拉可以刷新"))}}};n.default=c},"0a46":function(t,n,e){"use strict";var i={"uni-load-more":e("1da2").default},a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticClass:"tabs"},[e("v-uni-scroll-view",{staticClass:"scroll-h",attrs:{id:"tab-bar","scroll-x":!0,"show-scrollbar":!0}},t._l(t.tabBars,function(n,i){return e("v-uni-view",{key:n.id,staticClass:"uni-tab-item",attrs:{id:n.id,"data-current":i},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.ontabtap.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"uni-tab-item-title",class:t.tabIndex==i?"uni-tab-item-title-active":""},[t._v(t._s(n.name))]),t.tabIndex==i?e("v-uni-text",{staticClass:"line-b"}):t._e()],1)}),1)],1),e("v-uni-view",{staticClass:"line-h"}),e("v-uni-swiper",{staticClass:"swiper-box",staticStyle:{flex:"1"},style:{height:t.vHeight+"px"},attrs:{current:t.tabIndex,duration:300},on:{change:function(n){arguments[0]=n=t.$handleEvent(n),t.ontabchange.apply(void 0,arguments)}}},t._l(t.newsList,function(n,i){return e("v-uni-swiper-item",{key:i,staticClass:"swiper-item"},[e("v-uni-scroll-view",{staticClass:"scroll-v list",staticStyle:{"flex-shrink":"1"},style:{height:t.vHeight+"px"},attrs:{enableBackToTop:"true","scroll-y":!0},on:{scrolltolower:function(n){arguments[0]=n=t.$handleEvent(n),t.loadMore(i)}}},[t._l(n.data,function(t,n){return e("v-uni-view",{key:t.id},[e("news-item",{attrs:{options:t}})],1)}),e("uni-load-more",{staticClass:"loading-more",attrs:{status:t.isLoading?"loading":n.total>n.data.length?"more":"nomore",showIcon:!0}})],2)],1)}),1)],1)},o=[];e.d(n,"b",function(){return a}),e.d(n,"c",function(){return o}),e.d(n,"a",function(){return i})},"26b0":function(t,n,e){"use strict";var i,a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.options.title?e("v-uni-view",{staticClass:"news-item view",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.click.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"media-header"},[e("v-uni-view",{staticClass:"media-avatar",attrs:{"hover-class":"news-item-hover"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goMedia(t.options.media)}}},[e("cache-image",{attrs:{iconUrl:t.options.icon}})],1),e("v-uni-text",{staticClass:"media-name",attrs:{"hover-class":"news-item-hover"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goMedia(t.options.media)}}},[t._v(t._s(t.options.media))]),e("v-uni-text",{staticClass:"item-time"},[t._v(t._s(t.time))])],1),t.options.image?e("v-uni-view",{staticClass:"media-content view content-img",attrs:{"hover-class":"news-item-hover"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goDetail(t.options.newsId)}}},[e("v-uni-view",{staticClass:"content content-flex"},[e("v-uni-text",{staticClass:"media-title over"},[t._v(t._s(t.options.title))]),e("v-uni-text",{staticClass:"media-sum over"},[t._v(t._s(t.options.summary))])],1),e("v-uni-view",{staticClass:"main-img",staticStyle:{width:"210rpx","text-align":"center"}},[e("v-uni-image",{staticStyle:{width:"210rpx"},attrs:{src:t.options.image,mode:"aspectFill"},on:{error:function(n){arguments[0]=n=t.$handleEvent(n)}}})],1)],1):e("v-uni-view",{staticClass:"media-content view",attrs:{"hover-class":"news-item-hover"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goDetail(t.options.newsId)}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"media-title over"},[t._v(t._s(t.options.title))]),e("v-uni-text",{staticClass:"media-sum over"},[t._v(t._s(t.options.summary))])],1)],1),e("v-uni-view",{staticClass:"news-item-line",staticStyle:{position:"absolute"}})],1):t._e()},o=[];e.d(n,"b",function(){return a}),e.d(n,"c",function(){return o}),e.d(n,"a",function(){return i})},"27e8":function(t,n,e){n=t.exports=e("2350")(!1),n.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nuni-page-body[data-v-0a9d8294]{width:100%;min-height:100%;display:-webkit-box;display:-webkit-flex;display:flex}\r\n.tabs[data-v-0a9d8294]{-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;overflow:hidden;background-color:#fff;\r\n\t}.scroll-h[data-v-0a9d8294]{width:%?750?%;height:%?80?%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\r\n\twhite-space:nowrap\r\n\t\r\n\t/* flex-wrap: nowrap; */\r\n\t/* border-color: #cccccc;\n\t\tborder-bottom-style: solid;\n\t\tborder-bottom-width: 1px; */}.scroll-v[data-v-0a9d8294]{-webkit-box-flex:1;-webkit-flex:1;flex:1;\r\n\t-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\r\n\twidth:%?750?%}.swiper-box[data-v-0a9d8294]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.swiper-item[data-v-0a9d8294]{-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.uni-tab-item[data-v-0a9d8294]{\r\n\tdisplay:inline-block;\r\n\t-webkit-flex-wrap:nowrap;flex-wrap:nowrap;padding-left:%?34?%;padding-right:%?34?%}.uni-tab-item-title[data-v-0a9d8294]{color:#555;font-size:%?30?%;height:%?80?%;line-height:%?80?%;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;\r\n\twhite-space:nowrap\r\n\t}.uni-tab-item-title-active[data-v-0a9d8294]{color:#007aff}.line-b[data-v-0a9d8294]{position:absolute;height:%?8?%;width:%?40?%;background-color:#007aff;bottom:%?4?%;left:%?48?%}.line-h[data-v-0a9d8294]{height:%?1?%;background-color:hsla(0,0%,80%,.2)}.loading-text[data-v-0a9d8294]{color:#919191;font-size:%?32?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;text-align:center}.loading-more-text[data-v-0a9d8294]{color:#919191;font-size:%?32?%;text-align:center}",""])},"35a0":function(t,n,e){"use strict";e.r(n);var i=e("0043"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,function(){return i[t]})}(o);n["default"]=a.a},"36a1":function(t,n,e){var i=e("b684");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f06").default;a("b07d8fd8",i,!0,{sourceMap:!1,shadowMode:!1})},"5f2c":function(t,n,e){"use strict";e.r(n);var i=e("cb87"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,function(){return i[t]})}(o);n["default"]=a.a},"5f2f":function(t,n,e){"use strict";e.r(n);var i=e("0a46"),a=e("35a0");for(var o in a)"default"!==o&&function(t){e.d(n,t,function(){return a[t]})}(o);e("deaa");var r,s=e("f0c5"),l=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"0a9d8294",null,!1,i["a"],r);n["default"]=l.exports},"68ea":function(t,n,e){"use strict";e.r(n);var i=e("26b0"),a=e("5f2c");for(var o in a)"default"!==o&&function(t){e.d(n,t,function(){return a[t]})}(o);e("6fb6");var r,s=e("f0c5"),l=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"43f54806",null,!1,i["a"],r);n["default"]=l.exports},"6fb6":function(t,n,e){"use strict";var i=e("36a1"),a=e.n(i);a.a},b397:function(t,n,e){var i=e("27e8");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f06").default;a("c1822832",i,!0,{sourceMap:!1,shadowMode:!1})},b684:function(t,n,e){n=t.exports=e("2350")(!1),n.push([t.i,"uni-image[data-v-43f54806]{width:unset;height:%?210?%}.view[data-v-43f54806]{font-size:%?32?%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.flex-row[data-v-43f54806]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.flex-col[data-v-43f54806]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.list-cell[data-v-43f54806]{width:%?750?%;padding:0 %?30?%}.uni-list-cell-hover[data-v-43f54806]{background-color:#eee}.news-item[data-v-43f54806]{height:%?320?%;position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\r\n\t/* border-bottom-width: 1rpx;\n\t\tborder-bottom-style: solid;\n\t\tborder-bottom-color: #ebebeb; */padding-left:%?32?%;padding-right:%?32?%}.news-item-hover[data-v-43f54806]{background-color:#eee}.media-header[data-v-43f54806]{\r\n\tdisplay:-webkit-box;display:-webkit-flex;display:flex;\r\n\t-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;height:%?80?%;padding-top:%?12?%}.media-avatar[data-v-43f54806]{height:%?50?%;width:%?50?%;margin-right:%?16?%;overflow:hidden}.media-name[data-v-43f54806]{font-weight:700;margin-top:%?5?%}.item-time[data-v-43f54806]{position:absolute;font-size:%?24?%;right:%?36?%;top:%?30?%}.news-item-line[data-v-43f54806]{position:absolute;left:%?30?%;right:%?30?%;bottom:0;height:%?1?%;background-color:#ebebeb}.over[data-v-43f54806]{overflow:hidden;text-overflow:ellipsis;\r\n\tdisplay:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;\r\n\tlines:2}.content-img[data-v-43f54806]{\r\n\tdisplay:-webkit-box;display:-webkit-flex;display:flex;\r\n\t-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.media-content[data-v-43f54806]{margin-bottom:%?40?%}.content-flex[data-v-43f54806]{width:%?460?%}.media-title[data-v-43f54806]{font-size:%?36?%;font-weight:700;lines:2;line-height:%?48?%;margin-bottom:%?16?%}.media-sum[data-v-43f54806]{color:#747474;font-size:%?32?%;line-height:%?44?%}.main-img[data-v-43f54806]{margin-left:%?16?%;height:%?210?%;width:%?210?%;overflow:hidden}.media-info[data-v-43f54806]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.info-text[data-v-43f54806]{margin-right:%?20?%;color:#999;font-size:%?24?%}.media-foot[data-v-43f54806]{margin-top:%?25?%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.max-close-view[data-v-43f54806]{position:relative;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;width:%?40?%;height:%?30?%;line-height:%?30?%;border-width:%?1?%;border-style:solid;border-color:#aaa;border-radius:4px;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center}.close-l[data-v-43f54806]{position:absolute;width:%?18?%;height:%?1?%;background-color:#aaa}.close-h[data-v-43f54806]{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.close-v[data-v-43f54806]{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}",""])},cb87:function(t,n,e){"use strict";var i=e("288e");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("6b54");var a=e("ce35"),o=i(e("e2ae")),r=i(e("1081")),s=e("5f2f"),l={name:"news-item",data:function(){return{iconUrl:""}},components:{easyCacheimage:r.default,cacheImage:o.default},props:{options:{type:Object,default:function(t){return{}}}},created:function(){this.imageCache(this.options.icon)},computed:{time:function(){new Date,new Date(this.options.publishDate);return a.dateUtils.format(this.options.publishDate)}},methods:{goDetail:function(t){uni.navigateTo({url:"../detail/detail?id="+t})},goMedia:function(t){uni.navigateTo({url:"../media/media?name="+t})},imageCache:function(t){var n=this;uni.getStorage({key:t,success:function(e){e&&uni.request({url:e.data,method:"GET",success:function(){n.iconUrl=e.data}}),n.queryImage(t)},fail:function(e){n.queryImage(t)}})},queryImage:function(t){var n=this,e="wuanstar/",i=e+t;uni.request({url:s.baseUrl+"/oss/object?key="+i,method:"GET",success:function(e){"200"===e.data.status.toString()?(n.iconUrl=e.data.data,uni.downloadFile({url:n.iconUrl,success:function(e){200===e.statusCode&&uni.setStorage({key:t,data:e.tempFilePath,success:function(t){n.iconUrl=e.tempFilePath}})}})):uni.showModal({content:e.data.message,showCancel:!1})},fail:function(t){uni.showModal({content:t.message,showCancel:!1})}})},click:function(){this.$emit("click")},close:function(t){this.$emit("close")}}};n.default=l},deaa:function(t,n,e){"use strict";var i=e("b397"),a=e.n(i);a.a}}]);
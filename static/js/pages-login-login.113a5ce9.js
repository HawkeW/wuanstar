(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{3183:function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,"\nuni-button[data-v-4db0afa5]{border-radius:0}uni-button[data-v-4db0afa5]::hover{background-color:#1577fe}\n.content[data-v-4db0afa5]{width:%?750?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.header[data-v-4db0afa5]{margin-top:%?24?%;margin-bottom:%?88?%;color:#1577fe;text-align:center;font-size:%?52?%;font-weight:700}.input-wrapper[data-v-4db0afa5]{width:%?686?%;height:%?92?%;border-width:%?2?%;border-color:#e5e5e5}.input[data-v-4db0afa5]{height:%?92?%;width:%?686?%;padding-left:%?32?%}.placeholder[data-v-4db0afa5]{position:absolute;top:%?24?%;left:%?32?%;color:#8d8d8d;font-size:%?32?%}.reset-wrapper[data-v-4db0afa5]{-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;margin-bottom:%?248?%}.reset[data-v-4db0afa5]{margin-top:%?16?%;font-size:%?28?%}.button[data-v-4db0afa5]{width:%?686?%;margin-bottom:%?38?%;font-size:%?36?%;font-weight:700}.error-wrapper[data-v-4db0afa5]{height:%?50?%}.error[data-v-4db0afa5]{font-size:%?32?%;color:#dd524d;text-align:right;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.form-error[data-v-4db0afa5]{font-size:%?32?%;color:#dd524d;text-align:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}",""]),t.exports=a},"6b98":function(t,a,e){"use strict";var i=e("e49a"),n=e.n(i);n.a},"7c20":function(t,a,e){"use strict";e.r(a);var i=e("e08c"),n=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a["default"]=n.a},d27b:function(t,a,e){"use strict";var i,n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"header"},[t._v("欢迎回来!")]),e("v-uni-form",{on:{submit:function(a){arguments[0]=a=t.$handleEvent(a),t.submit.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"input-wrapper"},[t.user.email?t._e():e("v-uni-text",{staticClass:"placeholder"},[t._v("请输入电子邮箱")]),e("v-uni-input",{staticClass:"input",attrs:{type:"text",maxlength:"30"},on:{focus:function(a){arguments[0]=a=t.$handleEvent(a),t.emailStatus=0,t.formStatus=!0}},model:{value:t.user.email,callback:function(a){t.$set(t.user,"email",a)},expression:"user.email"}})],1),e("v-uni-view",{staticClass:"error-wrapper"},[1==t.emailStatus?e("v-uni-text",{staticClass:"error"},[t._v("电子邮箱格式错误")]):t._e(),2==t.emailStatus?e("v-uni-text",{staticClass:"error"},[t._v("电子邮箱未注册")]):t._e()],1),e("v-uni-view",{staticClass:"input-wrapper"},[t.user.password?t._e():e("v-uni-text",{staticClass:"placeholder"},[t._v("请输入登录密码")]),e("v-uni-input",{staticClass:"input",attrs:{type:"password",maxlength:"24"},on:{focus:function(a){arguments[0]=a=t.$handleEvent(a),t.pwdStatus=!0,t.formStatus=!0}},model:{value:t.user.password,callback:function(a){t.$set(t.user,"password",a)},expression:"user.password"}})],1),e("v-uni-view",{staticClass:"error-wrapper"},[t.pwdStatus?t._e():e("v-uni-text",{staticClass:"error"},[t._v("密码错误")])],1),e("v-uni-view",{staticClass:"reset-wrapper"},[e("v-uni-navigator",{attrs:{url:"./reset"}},[e("v-uni-text",{staticClass:"reset"},[t._v("忘记密码 ？")])],1)],1),e("v-uni-view",{staticClass:"error-wrapper"},[t.formStatus?t._e():e("v-uni-text",{staticClass:"form-error"},[t._v("信息填写不完整")])],1),e("v-uni-view",{staticClass:"form-btn"},[e("v-uni-button",{staticClass:"button",attrs:{"form-type":"submit",type:"primary"}},[t._v("登录")]),e("v-uni-button",{staticClass:"button",attrs:{type:"primary",plain:"true"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toRegister.apply(void 0,arguments)}}},[t._v("注册")])],1)],1)],1)},s=[];e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){return i}))},e08c:function(t,a,e){"use strict";var i=e("ee27");e("d3b7"),e("ac1f"),e("25f0"),e("466d"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e("f3f3")),s=e("c4d0"),r=e("2f62"),o={data:function(){return{user:{email:"",password:""},emailStatus:0,pwdStatus:!0,formStatus:!0}},computed:(0,n.default)({},(0,r.mapState)(["auth"])),methods:(0,n.default)({},(0,r.mapMutations)(["login","setAuth"]),{submit:function(){var t=this,a=this.validateForm(this.user);a&&uni.request({url:s.baseUrl+"/user/token",method:"POST",data:{email:this.user.email,pwd:this.user.password},success:function(a){if("200"!==a.data.status.toString()){if("密码错误"==a.data.message)return void(t.pwdStatus=!1);uni.showToast({title:a.data.message,icon:"none"})}else{uni.showToast({title:"登录成功",icon:"success"}),t.setAuth(a.data.data.Auth),uni.setStorage({key:"auth",data:a.data.data.Auth});var e={email:t.user.email,name:a.data.data.userInfo.nickname,id:a.data.data.userInfo.userId};t.login(e),setTimeout((function(){t.toPage()}),1e3)}},fail:function(t){uni.showToast({title:t.data.message,icon:"none"})}})},toPage:function(){if(getCurrentPages().length>1){var t=getCurrentPages().length-2,a=getCurrentPages()[t].$page;a.meta.isTabBar?uni.reLaunch({url:a.path}):uni.navigateBack()}else uni.switchTab({url:"../home/home"})},validateForm:function(t){var a="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$";return""==t.email||""==t.password?(this.formStatus=!1,!1):!!t.email.match(a)||(this.emailStatus=1,!1)},toRegister:function(){uni.navigateTo({url:"./register"})}})};a.default=o},e49a:function(t,a,e){var i=e("3183");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("33dc6366",i,!0,{sourceMap:!1,shadowMode:!1})},f965:function(t,a,e){"use strict";e.r(a);var i=e("d27b"),n=e("7c20");for(var s in n)"default"!==s&&function(t){e.d(a,t,(function(){return n[t]}))}(s);e("6b98");var r,o=e("f0c5"),u=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"4db0afa5",null,!1,i["a"],r);a["default"]=u.exports}}]);
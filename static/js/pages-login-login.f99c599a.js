(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"3ae7":function(n,t,e){"use strict";e.r(t);var a=e("ebd7"),r=e("eda8");for(var i in r)"default"!==i&&function(n){e.d(t,n,(function(){return r[n]}))}(i);e("a951");var s,o=e("f0c5"),u=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"0920ea3f",null,!1,a["a"],s);t["default"]=u.exports},a951:function(n,t,e){"use strict";var a=e("d798"),r=e.n(a);r.a},c934:function(n,t,e){var a=e("24fb");t=a(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nuni-button[data-v-0920ea3f]{border-radius:0}uni-button[data-v-0920ea3f]::hover{background-color:#1577fe}\r\n.content[data-v-0920ea3f]{width:%?750?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.header[data-v-0920ea3f]{margin-top:%?24?%;margin-bottom:%?88?%;color:#1577fe;text-align:center;font-size:%?52?%;font-weight:700}.input-wrapper[data-v-0920ea3f]{width:%?686?%;height:%?92?%;border-width:%?2?%;border-color:#e5e5e5;margin-bottom:%?50?%}.input[data-v-0920ea3f]{height:%?92?%;width:%?686?%;padding-left:%?32?%}.placeholder[data-v-0920ea3f]{position:absolute;top:%?24?%;left:%?32?%;color:#8d8d8d;font-size:%?32?%}.reset-wrapper[data-v-0920ea3f]{-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;margin-bottom:%?248?%}.reset[data-v-0920ea3f]{margin-top:%?16?%;font-size:%?28?%}.button[data-v-0920ea3f]{width:%?686?%;margin-bottom:%?38?%;font-size:%?36?%;font-weight:700}.error[data-v-0920ea3f]{position:absolute;right:0;top:%?90?%;font-size:%?32?%;color:#dd524d}.form-error[data-v-0920ea3f]{position:absolute;top:%?-50?%;right:%?220?%;padding-bottom:%?20?%;font-size:%?32?%;color:#dd524d}",""]),n.exports=t},d798:function(n,t,e){var a=e("c934");"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var r=e("4f06").default;r("80218638",a,!0,{sourceMap:!1,shadowMode:!1})},dc16:function(n,t,e){"use strict";var a=e("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("8e6e"),e("ac6a"),e("456d"),e("4917"),e("6b54");var r=a(e("bd86")),i=e("a1a3"),s=e("2f62");function o(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,a)}return e}function u(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?o(Object(e),!0).forEach((function(t){(0,r.default)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var c={data:function(){return{user:{email:"",password:""},emailStatus:0,pwdStatus:!0,formStatus:!0}},computed:u({},(0,s.mapState)(["auth"])),methods:u({},(0,s.mapMutations)(["login","setAuth"]),{submit:function(){var n=this,t=this.validateForm(this.user);t&&uni.request({url:i.baseUrl+"/user/token",method:"POST",data:{email:this.user.email,pwd:this.user.password},success:function(t){if("200"!==t.data.status.toString()){if("密码错误"==t.data.message)return void(n.pwdStatus=!1);uni.showToast({title:t.data.message,icon:"none"})}else{uni.showToast({title:"登录成功",icon:"success"}),n.setAuth(t.data.data.Auth);var e={email:n.user.email,name:t.data.data.userInfo.nickname,id:t.data.data.userInfo.userId};n.login(e),setTimeout((function(){n.toPage()}),1e3)}},fail:function(n){uni.showToast({title:n.data.message,icon:"none"})}})},toPage:function(){if(getCurrentPages().length>1){var n=getCurrentPages().length-2,t=getCurrentPages()[n].$page;t.meta.isTabBar?uni.reLaunch({url:t.path}):uni.redirectTo({url:t.path})}else uni.switchTab({url:"../home/home"})},validateForm:function(n){var t="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$";return""==n.email||""==n.password?(this.formStatus=!1,!1):!!n.email.match(t)||(this.emailStatus=1,!1)},toRegister:function(){uni.navigateTo({url:"./register"})}})};t.default=c},ebd7:function(n,t,e){"use strict";var a,r=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"header"},[n._v("欢迎回来!")]),e("v-uni-form",{on:{submit:function(t){arguments[0]=t=n.$handleEvent(t),n.submit.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"input-wrapper"},[n.user.email?n._e():e("v-uni-text",{staticClass:"placeholder"},[n._v("请输入电子邮箱")]),e("v-uni-input",{staticClass:"input",attrs:{type:"text",maxlength:"30"},on:{focus:function(t){arguments[0]=t=n.$handleEvent(t),n.emailStatus=0,n.formStatus=!0}},model:{value:n.user.email,callback:function(t){n.$set(n.user,"email",t)},expression:"user.email"}}),1==n.emailStatus?e("v-uni-text",{staticClass:"error"},[n._v("电子邮箱格式错误")]):n._e(),2==n.emailStatus?e("v-uni-text",{staticClass:"error"},[n._v("电子邮箱未注册")]):n._e()],1),e("v-uni-view",{staticClass:"input-wrapper"},[n.user.password?n._e():e("v-uni-text",{staticClass:"placeholder"},[n._v("请输入登录密码")]),e("v-uni-input",{staticClass:"input",attrs:{type:"password",maxlength:"24"},on:{focus:function(t){arguments[0]=t=n.$handleEvent(t),n.pwdStatus=!0,n.formStatus=!0}},model:{value:n.user.password,callback:function(t){n.$set(n.user,"password",t)},expression:"user.password"}}),n.pwdStatus?n._e():e("v-uni-text",{staticClass:"error"},[n._v("密码错误")])],1),e("v-uni-view",{staticClass:"reset-wrapper"},[e("v-uni-navigator",{attrs:{url:"./reset"}},[e("v-uni-text",{staticClass:"reset"},[n._v("忘记密码 ？")])],1)],1),e("v-uni-view",{staticClass:"form-btn"},[n.formStatus?n._e():e("v-uni-view",{staticClass:"form-error"},[n._v("信息填写不完整")]),e("v-uni-button",{staticClass:"button",attrs:{"form-type":"submit",type:"primary"}},[n._v("登录")]),e("v-uni-button",{staticClass:"button",attrs:{type:"primary",plain:"true"},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.toRegister.apply(void 0,arguments)}}},[n._v("注册")])],1)],1)],1)},i=[];e.d(t,"b",(function(){return r})),e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){return a}))},eda8:function(n,t,e){"use strict";e.r(t);var a=e("dc16"),r=e.n(a);for(var i in a)"default"!==i&&function(n){e.d(t,n,(function(){return a[n]}))}(i);t["default"]=r.a}}]);
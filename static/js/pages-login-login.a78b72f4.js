(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"0a79":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"\nuni-button[data-v-237686b8]{-webkit-border-radius:0;border-radius:0}uni-button[data-v-237686b8]::hover{background-color:#1577fe}\n.content[data-v-237686b8]{width:%?750?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.header[data-v-237686b8]{margin-top:%?24?%;margin-bottom:%?88?%;color:#1577fe;text-align:center;font-size:%?52?%;font-weight:700}.input-wrapper[data-v-237686b8]{width:%?686?%;height:%?92?%;border-width:%?2?%;border-color:#e5e5e5}.input[data-v-237686b8]{height:%?92?%;width:%?686?%;padding-left:%?32?%}.placeholder[data-v-237686b8]{position:absolute;top:%?24?%;left:%?32?%;color:#8d8d8d;font-size:%?32?%}.reset-wrapper[data-v-237686b8]{-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;margin-bottom:%?248?%}.reset[data-v-237686b8]{margin-top:%?16?%;font-size:%?28?%}.button[data-v-237686b8]{width:%?686?%;margin-bottom:%?38?%;font-size:%?36?%;font-weight:700}.error-wrapper[data-v-237686b8]{height:%?50?%}.error[data-v-237686b8]{font-size:%?32?%;color:#dd524d;text-align:right;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.form-error[data-v-237686b8]{font-size:%?32?%;color:#dd524d;text-align:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}",""]),t.exports=e},"367d":function(t,e,a){"use strict";a.r(e);var i=a("97d4"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"5a0f":function(t,e,a){"use strict";a.r(e);var i=a("80e3"),n=a("367d");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("7e14");var r,o=a("f0c5"),u=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"237686b8",null,!1,i["a"],r);e["default"]=u.exports},"7e14":function(t,e,a){"use strict";var i=a("fb02"),n=a.n(i);n.a},"80e3":function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[a("v-uni-text",{staticClass:"header"},[t._v("欢迎回来!")]),a("v-uni-form",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"input-wrapper"},[t.user.email?t._e():a("v-uni-text",{staticClass:"placeholder"},[t._v("请输入电子邮箱")]),a("v-uni-input",{staticClass:"input",attrs:{type:"text",maxlength:"30"},on:{focus:function(e){arguments[0]=e=t.$handleEvent(e),t.emailStatus=0,t.formStatus=!0}},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),a("v-uni-view",{staticClass:"error-wrapper"},[1==t.emailStatus?a("v-uni-text",{staticClass:"error"},[t._v("电子邮箱格式错误")]):t._e(),2==t.emailStatus?a("v-uni-text",{staticClass:"error"},[t._v("电子邮箱未注册")]):t._e()],1),a("v-uni-view",{staticClass:"input-wrapper"},[t.user.password?t._e():a("v-uni-text",{staticClass:"placeholder"},[t._v("请输入登录密码")]),a("v-uni-input",{staticClass:"input",attrs:{type:"password",maxlength:"24"},on:{focus:function(e){arguments[0]=e=t.$handleEvent(e),t.pwdStatus=!0,t.formStatus=!0}},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),a("v-uni-view",{staticClass:"error-wrapper"},[t.pwdStatus?t._e():a("v-uni-text",{staticClass:"error"},[t._v("密码错误")])],1),a("v-uni-view",{staticClass:"reset-wrapper"},[a("v-uni-navigator",{attrs:{url:"./reset"}},[a("v-uni-text",{staticClass:"reset"},[t._v("忘记密码 ？")])],1)],1),a("v-uni-view",{staticClass:"error-wrapper"},[t.formStatus?t._e():a("v-uni-text",{staticClass:"form-error"},[t._v("信息填写不完整")])],1),a("v-uni-view",{staticClass:"form-btn"},[a("v-uni-button",{staticClass:"button",attrs:{"form-type":"submit",type:"primary"}},[t._v("登录")]),a("v-uni-button",{staticClass:"button",attrs:{type:"primary",plain:"true"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toRegister.apply(void 0,arguments)}}},[t._v("注册")])],1)],1)],1)},s=[];a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}))},"97d4":function(t,e,a){"use strict";(function(t){var i=a("ee27");a("d3b7"),a("ac1f"),a("25f0"),a("466d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("f3f3")),s=a("be9d"),r=a("2f62"),o={data:function(){return{user:{email:"",password:""},emailStatus:0,pwdStatus:!0,formStatus:!0}},computed:(0,n.default)({},(0,r.mapState)(["auth"])),methods:(0,n.default)({},(0,r.mapMutations)(["login","setAuth"]),{submit:function(){var e=this,a=this.validateForm(this.user);a&&uni.request({url:s.baseUrl+"/user/token",method:"POST",data:{email:this.user.email,pwd:this.user.password},success:function(a){if("200"!==a.data.status.toString())return"密码错误"==a.data.message?void(e.pwdStatus=!1):void uni.showToast({title:a.data.message,icon:"none"});uni.showToast({title:"登录成功",icon:"success"});var i=a.data.data.userInfo,n=a.data.data.Auth,s=i.nickname,r=i.userId;t("log",n," at pages/login/login.nvue:97"),e.setAuth(n),uni.setStorage({key:"auth",data:n});var o={email:e.user.email,name:s,id:r};e.login(o),setTimeout((function(){e.toPage()}),500)},fail:function(t){uni.showToast({title:t.data.message,icon:"none"})}})},toPage:function(){var e=getCurrentPages();if(t("log",e," at pages/login/login.nvue:125"),e.length>1){var a=e.length-2,i=e[a].$page;i.meta.isTabBar?uni.switchTab({url:i.path}):uni.navigateBack()}else uni.switchTab({url:"../home/home"})},validateForm:function(t){var e="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$";return""==t.email||""==t.password?(this.formStatus=!1,!1):!!t.email.match(e)||(this.emailStatus=1,!1)},toRegister:function(){uni.navigateTo({url:"./register"})}})};e.default=o}).call(this,a("0de9")["log"])},fb02:function(t,e,a){var i=a("0a79");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("175ee6e6",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-follow-follow"],{"0ec4":function(t,i,e){"use strict";(function(t){var n=e("ee27");e("99af"),e("d3b7"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("f3f3")),a=e("e9b7"),l=e("2f62"),s=(e("c7d5"),n(e("c1e6"))),r=n(e("7aa5")),c={data:function(){return{followedList:[],status:!0,pages:0,currentPage:1,total:0,refreshing:!1,refreshFlag:!1,pulling:!1,vHeight:0,refreshText:"正在加载",isLoading:!1,scrollTop:0,old:{scrollTop:0}}},components:{newsItem:r.default,mediaCard:s.default},computed:(0,o.default)({},(0,l.mapState)(["user","hasLogin","lastTab","auth"]),{loadingText:function(){return this.isLoading?"正在加载...":this.followedList.length>=this.total?"没有更多了":"上拉加载更多"}}),methods:(0,o.default)({},(0,l.mapMutations)(["setAuth","login","setLastTab"]),{loadMore:function(){var i=this;t("log",this.followedList,this.total," at pages/follow/follow.nvue:94"),void 0===this.currentPage||this.isLoading||this.followedList.length>=this.total||(this.isLoading=!0,this.getList().then((function(t){i.isLoading=!1})).catch((function(t){i.isLoading=!1})))},scroll:function(t){this.old.scrollTop=t.detail.scrollTop},goTop:function(){this.scrollTop=this.old.scrollTop,this.$nextTick((function(){this.scrollTop=0}))},getList:function(){var t=this,i=new Promise((function(i,e){(0,a.getFollowed)({pageNum:t.currentPage,pageSize:20},{ContentType:"application/x-www-form-urlencoded",token:t.auth}).then((function(n){if(!n.status)throw new Error("加载数据失败");if("200"==n.status){var o=[];if(o=n.data.dataOnThisPage,null===o||null===o[0])return void e("数据加载失败");t.currentPage++,t.total=n.data.total,t.pages=n.data.pages,t.followedList=t.followedList.concat(o),i("ok")}else e("请求异常")})).catch((function(t){e(t)}))}));return i},getScreenHeight:function(){var t=this;uni.getSystemInfo({success:function(i){t.vHeight=i.screenHeight-84}})},toMedia:function(t){uni.navigateTo({url:"../media/media?id=".concat(t.mediaId,"&name=").concat(t.name,"&icon=").concat(t.icon,"&followNum=").concat(t.followNum)})},toLogin:function(){uni.navigateTo({url:"/pages/inputphone/inputphone"})},init:function(){var i=this;this.hasLogin&&this.auth&&!this.followedList.length&&(t("log","init"," at pages/follow/follow.nvue:170"),this.status=!0,this.isLoading=!0,this.getList().then((function(t){i.isLoading=!1})).catch((function(t){i.status=!1,i.isLoading=!1})))}}),onLoad:function(){this.isLoading||this.init()},onShow:function(){this.isLoading||this.init()},onTabItemTap:function(t){this.isLoading||(this.init(),1==t.index&&1==this.lastTab&&this.goTop(),this.setLastTab(t.index))},onNavigationBarButtonTap:function(t){1==t.index&&this.goTop()},onReachBottom:function(){this.followedList.length>=this.total||this.loadMore()}};i.default=c}).call(this,e("0de9")["log"])},"12e6":function(t,i,e){"use strict";e.r(i);var n=e("0ec4"),o=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,(function(){return n[t]}))}(a);i["default"]=o.a},"1b1d":function(t,i,e){"use strict";e.r(i);var n=e("35a8"),o=e("12e6");for(var a in o)"default"!==a&&function(t){e.d(i,t,(function(){return o[t]}))}(a);e("cd70");var l,s=e("f0c5"),r=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"284b0af4",null,!1,n["a"],l);i["default"]=r.exports},"35a8":function(t,i,e){"use strict";var n={uniLoadMore:e("1da2").default},o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"view"},[t.hasLogin?e("v-uni-scroll-view",{staticClass:"scroll-v list",style:{height:t.vHeight+"px"},attrs:{enableBackToTop:"true","scroll-top":t.scrollTop,"scroll-y":"true","scroll-with-animation":"true"},on:{scroll:function(i){arguments[0]=i=t.$handleEvent(i),t.scroll.apply(void 0,arguments)}}},[t._l(t.followedList,(function(i,n){return e("v-uni-view",{key:i.mediaId},[e("media-card",{staticClass:"media-card",attrs:{title:i.name,icon:i.icon,datas:i.newsList},nativeOn:{click:function(e){return t.toMedia(i)}}})],1)})),e("uni-load-more",{staticClass:"loading-more",attrs:{status:t.isLoading?"loading":t.total>t.followedList.length?"more":"nomore",showIcon:!0}})],2):t._e(),t.hasLogin?t._e():e("v-uni-button",{staticClass:"user-button login-btn",attrs:{type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toLogin.apply(void 0,arguments)}}},[t._v("登录")])],1)},a=[];e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return n}))},"95f7":function(t,i,e){var n=e("9755");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=e("4f06").default;o("b0d90f52",n,!0,{sourceMap:!1,shadowMode:!1})},9755:function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,"\nuni-image[data-v-284b0af4]{width:unset;height:%?210?%}\n.view[data-v-284b0af4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;overflow:hidden;background-color:#f6f6f6;padding-left:%?30?%;padding-right:%?30?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.scroll-v[data-v-284b0af4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;\n\n\n\n-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\nwidth:%?750?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.media-card[data-v-284b0af4]{margin-top:%?25?%;width:%?690?%;margin-left:%?30?%;margin-right:%?30?%}.news-item[data-v-284b0af4]{height:%?320?%;position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\n    /* border-bottom-width: 1rpx;\n\t\tborder-bottom-style: solid;\n\t\tborder-bottom-color: #ebebeb; */padding-left:%?32?%;padding-right:%?32?%}.loading-more[data-v-284b0af4]{-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:10px;padding-bottom:10px;text-align:center}.loading-more-text[data-v-284b0af4]{font-size:%?28?%;color:#999}.user-button[data-v-284b0af4]{width:%?610?%;\n    /* margin-bottom: 38rpx; */font-size:%?30?%;font-weight:700;box-shadow:0 0 %?9?% 0 rgba(0,122,255,.55)}.login-btn[data-v-284b0af4]{margin-top:%?520?%}.indicator-text[data-v-284b0af4]{color:#888;font-size:16px;text-align:center}.loading[data-v-284b0af4]{width:%?750?%;\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?80?%}.error[data-v-284b0af4]{height:%?500?%;margin-top:%?100?%}",""]),t.exports=i},cd70:function(t,i,e){"use strict";var n=e("95f7"),o=e.n(n);o.a}}]);